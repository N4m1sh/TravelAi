const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 0.8,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

   export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
            role: "user",
            parts: [
              {text: " Generate Travel Plan for Location: Bali, Indonesia, for 3 Days and 2 Nights for Couple with Luxury budget with Flight details, Flight Price with booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and places to visit nearby ones with placeName, Place Details, Place Image Url, Geo coordinates, ticket Pricing, Time to travel each of location for 3 days 2 night with each day plan with best time to visit in JSON format.\n"},
            ],
          },
          {
            role: "model",
            parts: [
              {text: "```json\n{\n  \"tripDetails\": {\n    \"location\": \"Bali, Indonesia\",\n    \"duration\": \"3 Days, 2 Nights\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Luxury\"\n  },\n  \"flights\": {\n    \"arrival\": {\n      \"airline\": \"Qatar Airways/Singapore Airlines (Example)\",\n      \"flightNumber\": \"QR960/SQ944 (Example)\",\n      \"departureAirport\": \"Your Departure Airport Code (e.g., JFK)\",\n      \"arrivalAirport\": \"DPS (Denpasar International Airport)\",\n      \"departureTime\": \"Suggest early morning departure to maximize time\",\n      \"arrivalTime\": \"Suggest afternoon arrival\",\n      \"flightPrice\": {\n        \"currency\": \"USD\",\n        \"estimatedPrice\": 1800\n      },\n      \"bookingUrl\": \"https://www.kayak.com\"\n    },\n    \"departure\": {\n      \"airline\": \"Qatar Airways/Singapore Airlines (Example)\",\n      \"flightNumber\": \"QR961/SQ945 (Example)\",\n      \"departureAirport\": \"DPS (Denpasar International Airport)\",\n      \"arrivalAirport\": \"Your Departure Airport Code (e.g., JFK)\",\n      \"departureTime\": \"Suggest evening departure\",\n      \"arrivalTime\": \"Suggest next day arrival\",\n      \"flightPrice\": {\n        \"currency\": \"USD\",\n        \"estimatedPrice\": 1800\n      },\n      \"bookingUrl\": \"https://www.kayak.com\"\n    }\n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"Four Seasons Resort Bali at Sayan\",\n      \"hotelAddress\": \"Sayan, Ubud, Gianyar, Bali 80571, Indonesia\",\n      \"price\": {\n        \"currency\": \"USD\",\n        \"estimatedPricePerNight\": 700\n      },\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/4f/b6/6e/four-seasons-resort.jpg?w=900&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": -8.4898,\n        \"longitude\": 115.2570\n      },\n      \"rating\": 4.8,\n      \"description\": \"Luxurious riverside resort with stunning views, private villas, and exceptional service. Perfect for relaxation and rejuvenation.\",\n      \"nearbyPlaces\": [\n        {\n          \"placeName\": \"Ubud Monkey Forest\",\n          \"placeDetails\": \"Sacred monkey forest sanctuary with ancient temples and playful monkeys.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Ubud_Monkey_Forest_Entrance.jpg/1280px-Ubud_Monkey_Forest_Entrance.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": -8.5181,\n            \"longitude\": 115.2665\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"estimatedPrice\": 8\n          },\n          \"timeToTravel\": \"15 minutes by car\"\n        }\n      ]\n    },\n    {\n      \"hotelName\": \"The St. Regis Bali Resort\",\n      \"hotelAddress\": \"Kawasan Pariwisata Nusa Dua, Lot S6, Nusa Dua, Bali 80363, Indonesia\",\n      \"price\": {\n        \"currency\": \"USD\",\n        \"estimatedPricePerNight\": 600\n      },\n      \"hotelImageUrl\": \"https://thumbnails.trvl-media.com/Q1kYv9-0yJvH06Q8tO44I433yG8=/512x384/smart/filters:quality(60)/images.trvl-media.com/hotels/1000000/20000/10200/10152/891b03ff_z.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": -8.7988,\n        \"longitude\": 115.2217\n      },\n      \"rating\": 4.7,\n      \"description\": \"Opulent beachfront resort with private beach access, world-class dining, and impeccable service.\",\n      \"nearbyPlaces\": [\n        {\n          \"placeName\": \"Nusa Dua Beach\",\n          \"placeDetails\": \"Pristine white-sand beach with calm waters, perfect for swimming and sunbathing.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Nusa_Dua_Beach_Bali.jpg/1280px-Nusa_Dua_Beach_Bali.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": -8.8023,\n            \"longitude\": 115.2229\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"estimatedPrice\": 0\n          },\n          \"timeToTravel\": \"Walkable from the resort\"\n        }\n      ]\n    }\n  ],\n  \"dailyPlan\": [\n    {\n      \"day\": 1,\n      \"theme\": \"Ubud Cultural Immersion\",\n      \"activities\": [\n        {\n          \"time\": \"Afternoon (Arrival & Check-in)\",\n          \"description\": \"Arrive at Denpasar Airport (DPS), private transfer to Four Seasons Resort Bali at Sayan in Ubud. Check in and settle into your villa.\",\n          \"duration\": \"2-3 hours\",\n          \"notes\": \"Arrange private airport transfer in advance.\"\n        },\n        {\n          \"time\": \"Late Afternoon\",\n          \"description\": \"Visit Ubud Monkey Forest.  Explore the sacred sanctuary and observe the monkeys in their natural habitat.\",\n          \"duration\": \"2 hours\",\n          \"place\": \"Ubud Monkey Forest\",\n          \"bestTimeToVisit\": \"Late afternoon to avoid crowds and heat.\"\n        },\n        {\n          \"time\": \"Evening\",\n          \"description\": \"Traditional Balinese dance performance at Ubud Palace. Enjoy a captivating cultural experience.\",\n          \"duration\": \"2 hours\",\n          \"place\": \"Ubud Palace\",\n          \"geoCoordinates\": {\n            \"latitude\": -8.5085,\n            \"longitude\": 115.2657\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"estimatedPrice\": 10\n          },\n          \"bestTimeToVisit\": \"Evening for the dance performance.\"\n        },\n        {\n          \"time\": \"Night\",\n          \"description\": \"Fine dining experience at Locavore (Ubud).  Indulge in innovative Indonesian cuisine.\",\n          \"duration\": \"2-3 hours\",\n          \"place\": \"Locavore\",\n          \"geoCoordinates\": {\n            \"latitude\": -8.5122,\n            \"longitude\": 115.2646\n          },\n          \"notes\": \"Reservations are essential.\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Coastal Bliss & Relaxation\",\n      \"activities\": [\n        {\n          \"time\": \"Morning\",\n          \"description\": \"Private yoga session at your villa or at the hotel's yoga pavilion. Start the day with wellness and mindfulness.\",\n          \"duration\": \"1.5 hours\",\n          \"notes\": \"Arrange with the hotel concierge.\"\n        },\n        {\n          \"time\": \"Late Morning\",\n          \"description\": \"Transfer to Nusa Dua (private car). Check in to The St. Regis Bali Resort.\",\n          \"duration\": \"2-3 hours\",\n          \"notes\": \"Enjoy the scenic drive.\"\n        },\n        {\n          \"time\": \"Afternoon\",\n          \"description\": \"Relax on Nusa Dua Beach. Swim in the turquoise waters, sunbathe, or enjoy water sports.\",\n          \"duration\": \"3 hours\",\n          \"place\": \"Nusa Dua Beach\"\n        },\n        {\n          \"time\": \"Late Afternoon\",\n          \"description\": \"Couple's spa treatment at Rem√®de Spa (St. Regis). Rejuvenate with a luxurious massage and wellness experience.\",\n          \"duration\": \"2 hours\",\n          \"notes\": \"Book in advance.\"\n        },\n        {\n          \"time\": \"Evening\",\n          \"description\": \"Romantic dinner at Kayuputi Restaurant (St. Regis).  Enjoy fine dining with ocean views.\",\n          \"duration\": \"2-3 hours\",\n          \"notes\": \"Elegant attire recommended. Reservations required.\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"theme\": \"Sunset Spectacle & Departure\",\n      \"activities\": [\n        {\n          \"time\": \"Morning\",\n          \"description\": \"Enjoy a leisurely breakfast at the resort.\",\n          \"duration\": \"1-2 hours\"\n        },\n        {\n          \"time\": \"Late Morning\",\n          \"description\": \"Optional: Water sports activity (jet ski, parasailing) at Nusa Dua. Or, relax by the pool.\",\n          \"duration\": \"2 hours\"\n        },\n        {\n          \"time\": \"Afternoon\",\n          \"description\": \"Visit Uluwatu Temple. Witness the breathtaking sunset views from the cliffside temple.\",\n          \"duration\": \"3 hours\",\n          \"place\": \"Uluwatu Temple\",\n          \"geoCoordinates\": {\n            \"latitude\": -8.8285,\n            \"longitude\": 115.0861\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"estimatedPrice\": 5\n          },\n          \"bestTimeToVisit\": \"Late afternoon for sunset.\"\n        },\n        {\n          \"time\": \"Evening\",\n          \"description\": \"Enjoy Kecak Fire Dance at Uluwatu Temple (optional, usually performed around sunset).\",\n          \"duration\": \"1 hour\",\n          \"notes\": \"Check performance times and book tickets in advance.\",\n          \"ticketPricing\":{\n             \"currency\": \"USD\",\n             \"estimatedPrice\": 10\n          }\n        },\n        {\n          \"time\": \"Night\",\n          \"description\": \"Transfer to Denpasar Airport (DPS) for your departure flight.\",\n          \"duration\": \"1-2 hours\",\n          \"notes\": \"Allow ample time for airport procedures.\"\n        }\n      ]\n    }\n  ],\n  \"notes\": \"Enjoy your luxurious Bali getaway!\"\n}\n```"},
            ],
          },
      ],
    });
  
   // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
   // console.log(result.response.text());

